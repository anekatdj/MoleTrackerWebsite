@page "/doctorinformation"
@using DataClasses.Domain.MISC
@using PW_BusinessLogicLayer.Interfaces
@using DataClasses.Domain.Login
@inject DoctorContactInfo DoctorContactInfo
@inject PatientInfo PatientInfo
@inject ILoadContactInformationController LoadDoctorContactInformationController
@inject ILogInController LogInController
<link href="/css/LogOutStyle.css" rel="stylesheet" />


<div>
    <h3>Kontakt din læge</h3>
    <hr />

    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Lægepraksis</label>
        <div class="col">
            <input disabled="@true" type="text" class="form-control" placeholder=@DoctorContactInfo.MedicalPracticeName aria-label="First name">
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Adresse</label>
        <div class="col-sm-10">
            <input disabled="@true" type="text" class="form-control" id="colFormLabel" placeholder=@DoctorContactInfo.Adress>
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Telefon</label>
        <div class="col-sm-10">
            <input disabled="@true" type="password" class="form-control" id="colFormLabel" placeholder=@DoctorContactInfo.PhoneNumber>
        </div>
    </div>
    <div class="row mb-3 ">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Hjemmeside</label>
        <div class="col-sm-10">
            <input disabled="@true" type="text" class="form-control" id="colFormLabel" placeholder=@DoctorContactInfo.Website>
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Træffetider</label>
        <div class="col-sm-10">
            @foreach (var item in DoctorContactInfo.OpeningHours)
            {
                <input disabled="@true" type="text" class="form-control" id="colFormLabel" placeholder=@item style="margin-top:5px">
            }
        </div>
    </div>
</div>

@code {

    //Run this when page is loaded
    public void DisplayDoctorContactInfo()
    {
        DoctorContactInfo = LoadDoctorContactInformationController.HandleDoctorContactInfo(PatientInfo);
    }

    Task StartupTask()
    {
        return Task.CompletedTask;
    }

    protected override async Task OnInitializedAsync()
    {
        PatientInfo = LogInController.HandlePatientInfo();

        DisplayDoctorContactInfo();
        await StartupTask();
    }

}
