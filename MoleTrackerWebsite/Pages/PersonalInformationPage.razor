@page "/personalinformation"

@layout MainLayout

@using DataClasses.Domain
@using PW_BusinessLogicLayer
@using PW_BusinessLogicLayer.Interfaces

@inject PatientInfo PatientInfo
@inject ILogInController LogInController

<div>
    <h3>Personlige oplysninger</h3>
    <hr />
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Navn</label>
        <div class="col">
            <input disabled="@IsDisabled" type="text" class="form-control" placeholder=@PatientInfo.Name aria-label="First name">
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Fødselsdag</label>
        <div class="col-sm-10">
            <input disabled="@IsDisabled" type="text" class="form-control" id="colFormLabel" placeholder="01 Januar 1900">
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Køn</label>
        <div class="col-sm-10">
            <input disabled="@IsDisabled" type="text" class="form-control" id="colFormLabel" placeholder=@PatientInfo.Gender>
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Adgangskode</label>
        <div class="col-sm-10">
            <input disabled="@IsDisabled" type="password" class="form-control" id="colFormLabel" placeholder="Adgangskode">
        </div>
    </div>
    <div class="row mb-3 ">
        <label for="colFormLabel" class="col-sm-2 col-form-label">CPR-nummer</label>
        <div class="col-sm-10">
            <input disabled="@IsDisabled" type="text" class="form-control" id="colFormLabel" placeholder=@PatientInfo.CPR>
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Telefon</label>
        <div class="col-sm-10">
            <input disabled="@IsDisabled" type="email" class="form-control" id="colFormLabel" placeholder=@PatientInfo.PhoneNumber>
        </div>
    </div>
    <div class="row mb-3">
        <label for="colFormLabel" class="col-sm-2 col-form-label">Email</label>
        <div class="col-sm-10">
            <input disabled="@IsDisabled" type="email" class="form-control" id="colFormLabel" placeholder=@PatientInfo.Email>
        </div>
    </div>

    <button bind="@IsDisabled" type="submit" style="float:right" class="btn btn-primary rounded-pill" @onclick="EditAndSave">@TxtType</button>

</div>

@code{
    //Edit and save personal information
    public string TxtType = "Redigér";
    public bool IsDisabled = true;

    public void EditAndSave()
    {
        if (this.TxtType == "Redigér")
        {
            this.IsDisabled = false;
            this.TxtType = "Gem";
        }
        else
        {
            this.IsDisabled = true;
            this.TxtType = "Redigér";

        }
    }

    //Run this when page is loaded
    public void DisplayPatientInfo()
    {
        //PatientInfo = LogInController.HandlePatientInfo();
    }

    Task StartupTask()
    {
        return Task.CompletedTask;
    }

    protected override async Task OnInitializedAsync()
    {
        DisplayPatientInfo();
        await StartupTask();
    }
}



@*<div class="row">
        <div class="col-sm-3">
            <p>Navn</p>
        </div>
        <div class="col-sm-4">
            <p>@name</p>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <p>Fødselsdato</p>
        </div>
        <div class="col-sm-4">
            <p>@birthdate</p>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <p>Køn</p>
        </div>
        <div class="col-sm-4">
            <p>@gender</p>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <p>Adgangskode</p>
        </div>
        <div class="col-sm-4">
            <p>@password</p>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <p>E-mail</p>
        </div>
        <div class="col-sm-4">
            <p>@email</p>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <p>CPR-nummer</p>
        </div>
        <div class="col-sm-4">
            <p>@cpr</p>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <button class="btn btn-success">Ændr oplysninger</button>
        </div>
    </div>

    @code {
        private string name = "Laura Birch";
        private string birthdate ="20. juli 1998";
        private string gender = "Kvinde";
        private string password = "*********";
        private string email = "laura.birch@hotmail.dk";
        private string cpr = "200798-xxxx";
    }*@
